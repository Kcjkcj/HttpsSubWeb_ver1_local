# Node.jsë¥¼ ì‚¬ìš©í•´ ë¹Œë“œ
# frontend/Dockerfile
FROM node:18 as build
WORKDIR /app

# ì˜ì¡´ì„± ì„¤ì¹˜
COPY package*.json ./
RUN npm install typescript@4.9.5 --save-dev
RUN npm install --legacy-peer-deps

# ğŸ”¥ ì†ŒìŠ¤ ì½”ë“œ ëª…ì‹œì  ë³µì‚¬
COPY public ./public
COPY src ./src
COPY tsconfig.json ./
COPY . .
# ğŸ‘ˆ ë°˜ë“œì‹œ ì¶”ê°€


# ë¹Œë“œ ì „ì— ë³µì‚¬ëœ src ë””ë ‰í† ë¦¬ í™•ì¸
#RUN echo "ğŸ“ /app/src ëª©ë¡:" && ls -la /app/src && cat /app/src/__docker_test__.txt

# ë¹Œë“œ
RUN npm run build

# ê²°ê³¼ë¬¼ ë³µì‚¬
FROM alpine
WORKDIR /output
COPY --from=build /app/build /output

